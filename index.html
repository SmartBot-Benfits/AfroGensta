<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AfroGenstas - Afrobeat Artist Stock Market</title>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- jsPDF CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* Global Styles */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a1a1a, #ff6b6b);
            color: #fff;
            overflow-x: hidden;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        nav {
            background: rgba(0, 0, 0, 0.8);
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }
        nav button {
            background: none;
            border: none;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
        }
        .page {
            display: none;
            min-height: 100vh;
        }
        .active {
            display: block;
        }
        h1, h2 {
            text-align: center;
            color: #ffd700;
        }
        /* Artist Cards */
        .artist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        .artist-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
        }
        .artist-card:hover {
            transform: scale(1.05);
        }
        .artist-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
        }
        .artist-card .price {
            color: #00ff00;
            font-weight: bold;
        }
        /* Charts */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin: 20px 0;
        }
        /* Leaderboard */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .leaderboard-table th, .leaderboard-table td {
            padding: 10px;
            border: 1px solid #fff;
            text-align: left;
        }
        /* Futures Section */
        .futures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        .future-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        /* Macro Dashboard */
        .macro-stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .stat-card {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            text-align: center;
            width: 200px;
        }
        /* Insights */
        .insights-box {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        /* 3D Canvas */
        #threejs-canvas {
            width: 100%;
            height: 200px;
            margin: 20px 0;
        }
        /* Animations */
        @keyframes neon {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        .neon-bg {
            animation: neon 2s infinite;
        }
        /* Ad Placeholder */
        .ad-placeholder {
            background: #ffd700;
            color: #000;
            text-align: center;
            padding: 10px;
            margin: 20px 0;
            font-weight: bold;
        }
        /* Buy/Sell Buttons */
        .trade-button {
            background: #ffd700;
            color: #000;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar (Mobile-first bottom nav) -->
    <nav>
        <button onclick="showPage('landing')">Home</button>
        <button onclick="showPage('market')">Market</button>
        <button onclick="showPage('portfolio')">Portfolio</button>
        <button onclick="showPage('leaderboard')">Leaderboard</button>
        <button onclick="showPage('futures')">Futures</button>
        <button onclick="showPage('macro')">Macro</button>
        <button onclick="showPage('insights')">Insights</button>
    </nav>

    <!-- Landing Page -->
    <div id="landing" class="page active">
        <div class="container">
            <h1>Welcome to AfroGenstas</h1>
            <div id="threejs-canvas" class="neon-bg"></div>
            <p style="text-align: center;">Invest in Afrobeat artists like stocks, track your portfolio, and compete globally!</p>
            <button onclick="showPage('market')" style="display: block; margin: 20px auto; padding: 10px 20px; background: #ffd700; color: #000; border: none; cursor: pointer;">Start Trading</button>
            <div class="ad-placeholder">Ad Space: Sponsored by Afrobeat Hits</div>
            <!-- PWA Install Prompt Simulation -->
            <div id="install-prompt" style="text-align: center; margin: 20px; animation: fadeIn 2s;">
                <button onclick="simulateInstall()">Add to Home Screen</button>
            </div>
        </div>
    </div>

    <!-- Artist Stock Market Page -->
    <div id="market" class="page">
        <div class="container">
            <h2>Artist Stock Market</h2>
            <div class="artist-grid">
                <div class="artist-card">
                    <img src="https://via.placeholder.com/200?text=Burna+Boy" alt="Burna Boy">
                    <h3>Burna Boy ($BURNA)</h3>
                    <p class="price">$10.5</p>
                    <p>Streams: 1.2B | Change: +2.3%</p>
                    <canvas id="burna-chart" class="chart-container"></canvas>
                    <button class="trade-button" onclick="buyArtist('Burna Boy', 10.5)">Buy</button>
                    <button class="trade-button" onclick="sellArtist('Burna Boy', 10.5)">Sell</button>
                </div>
                <div class="artist-card">
                    <img src="https://via.placeholder.com/200?text=Asake" alt="Asake">
                    <h3>Asake ($ASAKE)</h3>
                    <p class="price">$8.2</p>
                    <p>Streams: 900M | Change: -1.1%</p>
                    <canvas id="asake-chart" class="chart-container"></canvas>
                    <button class="trade-button" onclick="buyArtist('Asake', 8.2)">Buy</button>
                    <button class="trade-button" onclick="sellArtist('Asake', 8.2)">Sell</button>
                </div>
                <!-- Add more artists as needed -->
            </div>
        </div>
    </div>

    <!-- Portfolio Page -->
    <div id="portfolio" class="page">
        <div class="container">
            <h2>Your Portfolio</h2>
            <p>Total Value: $<span id="portfolio-value">0</span> | P/L: $<span id="pl">0</span> | Return: <span id="return">0%</span></p>
            <p>Volatility: <span id="volatility">Low</span> | Sharpe Ratio: <span id="sharpe">1.2</span></p>
            <canvas id="portfolio-chart" class="chart-container"></canvas>
            <div id="holdings-table">
                <table class="leaderboard-table">
                    <thead>
                        <tr><th>Artist</th><th>Price</th><th>Change</th></tr>
                    </thead>
                    <tbody id="holdings-body"></tbody>
                </table>
            </div>
            <div class="ad-placeholder">Ad Space: Premium Insights Available</div>
        </div>
    </div>

    <!-- Leaderboards Page -->
    <div id="leaderboard" class="page">
        <div class="container">
            <h2>Global Leaderboard</h2>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>User</th>
                        <th>Portfolio Value</th>
                        <th>Diversification Score</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>AfroInvestor</td>
                        <td>$25.3</td>
                        <td>85%</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>BeatTrader</td>
                        <td>$24.8</td>
                        <td>78%</td>
                    </tr>
                    <!-- Add more rows -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Song & Beat Futures Page -->
    <div id="futures" class="page">
        <div class="container">
            <h2>Song & Beat Futures</h2>
            <div class="futures-grid">
                <div class="future-card">
                    <h3>Upcoming Track: "AfroFire"</h3>
                    <p>Projected ROI: 15% | Confidence: 80%</p>
                    <p>Countdown: 7 days</p>
                    <button class="trade-button">Invest</button>
                </div>
                <div class="future-card">
                    <h3>Beat: "Naija Vibes"</h3>
                    <p>Projected ROI: 20% | Confidence: 75%</p>
                    <p>Countdown: 14 days</p>
                    <button class="trade-button">Invest</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Afrobeat Macro Dashboard Page -->
    <div id="macro" class="page">
        <div class="container">
            <h2>Afrobeat Macro Dashboard</h2>
            <div class="macro-stats">
                <div class="stat-card">
                    <h3>Global Streams</h3>
                    <p>5.2B</p>
                </div>
                <div class="stat-card">
                    <h3>Market Share</h3>
                    <p>Spotify: 40% | YouTube: 35%</p>
                </div>
                <div class="stat-card">
                    <h3>Top Region</h3>
                    <p>Nigeria: 60%</p>
                </div>
                <div class="stat-card">
                    <h3>Emerging Genre</h3>
                    <p>Afro-Fusion: +25%</p>
                </div>
            </div>
            <canvas id="macro-chart" class="chart-container"></canvas>
        </div>
    </div>

    <!-- AI-Powered Insights Page -->
    <div id="insights" class="page">
        <div class="container">
            <h2>AI-Powered Insights</h2>
            <div class="insights-box">
                <h3>Gemini AI Analysis</h3>
                <p><strong>Portfolio Recommendation:</strong> Diversify into rising stars like $REMA for better returns.</p>
                <p><strong>Market Trend:</strong> Afrobeat streams up 12% this week.</p>
                <p><strong>Buy Alert:</strong> $ASAKE undervalued based on recent charts.</p>
                <button onclick="generateReport()" class="trade-button" style="padding: 10px 20px;">Generate & Download Report</button>
            </div>
        </div>
    </div>

    <script>
        // Page Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        // Portfolio Data
        let portfolio = [];
        let balance = 100; // Starting virtual currency
        let portfolioValue = 0;
        let pl = 0;
        let returnPct = 0;

        function buyArtist(name, price) {
            if (balance < price) {
                alert('Insufficient balance!');
                return;
            }
            const existing = portfolio.find(a => a.name === name);
            if (existing) {
                existing.shares += 1;
                existing.cost += price;
            } else {
                portfolio.push({ name, price, shares: 1, cost: price });
            }
            balance -= price;
            updatePortfolio();
        }

        function sellArtist(name, price) {
            const index = portfolio.findIndex(a => a.name === name);
            if (index === -1 || portfolio[index].shares === 0) {
                alert('No shares to sell!');
                return;
            }
            portfolio[index].shares -= 1;
            balance += price;
            if (portfolio[index].shares === 0) {
                portfolio.splice(index, 1);
            }
            updatePortfolio();
        }

        function updatePortfolio() {
            portfolioValue = portfolio.reduce((sum, a) => sum + a.price * a.shares, 0);
            pl = portfolioValue - portfolio.reduce((sum, a) => sum + a.cost, 0);
            returnPct = portfolioValue > 0 ? (pl / portfolioValue) * 100 : 0;

            document.getElementById('portfolio-value').textContent = portfolioValue.toFixed(2);
            document.getElementById('pl').textContent = pl.toFixed(2);
            document.getElementById('return').textContent = returnPct.toFixed(2) + '%';

            const holdingsBody = document.getElementById('holdings-body');
            holdingsBody.innerHTML = portfolio.map(a => `
                <tr>
                    <td>${a.name} (${a.shares} shares)</td>
                    <td>$${a.price}</td>
                    <td>+1.2%</td>
                </tr>
            `).join('');

            // Update Portfolio Chart
            const ctxPortfolio = document.getElementById('portfolio-chart').getContext('2d');
            new Chart(ctxPortfolio, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{ label: 'Portfolio Value', data: [90, 95, 100, portfolioValue], borderColor: '#ffd700' }]
                },
                options: { scales: { y: { beginAtZero: false } } }
            });
        }

        // Sample Charts for Artists
        function initCharts() {
            const ctxBurna = document.getElementById('burna-chart').getContext('2d');
            new Chart(ctxBurna, {
                type: 'line',
                data: {
                    labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5'],
                    datasets: [{ label: '$BURNA', data: [9.5, 10, 10.2, 10.4, 10.5], borderColor: '#00ff00' }]
                },
                options: { scales: { y: { beginAtZero: false } } }
            });

            const ctxAsake = document.getElementById('asake-chart').getContext('2d');
            new Chart(ctxAsake, {
                type: 'line',
                data: {
                    labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5'],
                    datasets: [{ label: '$ASAKE', data: [8.5, 8.3, 8.1, 8.0, 8.2], borderColor: '#ff0000' }]
                },
                options: { scales: { y: { beginAtZero: false } } }
            });

            // Macro Chart
            const ctxMacro = document.getElementById('macro-chart').getContext('2d');
            new Chart(ctxMacro, {
                type: 'pie',
                data: {
                    labels: ['Spotify', 'YouTube', 'Apple Music'],
                    datasets: [{ data: [40, 35, 25], backgroundColor: ['#1db954', '#ff0000', '#fa57c1'] }]
                }
            });
        }

        // 3D Background with Three.js
        function initThreeJS() {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / 200, 0.1, 1000); // Height fixed to 200px
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, 200);
            document.getElementById('threejs-canvas').appendChild(renderer.domElement);

            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshBasicMaterial({ color: 0xffd700, wireframe: true });
            const sphere = new THREE.Mesh(geometry, material);
            scene.add(sphere);

            camera.position.z = 5;

            function animate() {
                requestAnimationFrame(animate);
                sphere.rotation.x += 0.01;
                sphere.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();
        }

        // Simulate PWA Install
        function simulateInstall() {
            alert('App added to home screen! (Simulation)');
        }

        // Generate PDF Report with jsPDF
        function generateReport() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text('AfroGenstas Weekly Report', 10, 10);
            doc.text('Portfolio Value: $' + portfolioValue.toFixed(2), 10, 20);
            doc.text('AI Insight: Diversify for better returns.', 10, 30);
            doc.save('afrogenstas-report.pdf');
            alert('Report generated and downloaded! (Powered by Gemini AI simulation)');
        }

        // Initialize
        initCharts();
        initThreeJS();
        updatePortfolio();
    </script>
</body>
</html>
