<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="AfroGenstas: Trade Afrobeat stars in a music-finance simulation!">
  <meta name="theme-color" content="#00ff88">
  <title>AfroGenstas</title>
  <!-- Open Graph for Social Sharing -->
  <meta property="og:title" content="AfroGenstas">
  <meta property="og:image" content="https://example.com/og-image.jpg">
  <!-- Inline CSS (Minified) -->
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: linear-gradient(135deg, #1a1a2e, #16213e); color: #fff; }
    #app { max-width: 1200px; margin: auto; }
    .market, .portfolio, .leaderboard { padding: 20px; }
    .artist-card { background: #0f3460; border-radius: 10px; padding: 15px; margin: 10px; display: inline-block; }
    .nav { position: fixed; bottom: 0; width: 100%; background: #0f3460; display: flex; justify-content: space-around; padding: 10px 0; }
    canvas { max-width: 100%; height: auto; }
    /* Neon Animations */
    @keyframes glow { 0% { box-shadow: 0 0 5px #00ff88; } 50% { box-shadow: 0 0 20px #00ff88; } }
    .glow { animation: glow 2s infinite; }
  </style>
  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
  </script>
</head>
<body>
  <div id="app">
    <header>
      <h1>AfroGenstas</h1>
      <p>Trade Afrobeat Stars!</p>
    </header>
    <div class="market">
      <h2>Market</h2>
      <div id="artists"></div>
    </div>
    <div class="portfolio">
      <h2>Portfolio</h2>
      <div id="portfolio"></div>
      <canvas id="chart"></canvas>
    </div>
    <div class="leaderboard">
      <h2>Leaderboard</h2>
      <div id="leaderboard"></div>
    </div>
    <div class="insights">
      <h2>AI Insights</h2>
      <button id="generateReport">Generate Report</button>
      <div id="report"></div>
    </div>
    <div class="gallery">
      <h2>3D Gallery</h2>
      <canvas id="3dCanvas"></canvas>
    </div>
    <nav class="nav">
      <button onclick="showSection('market')">Market</button>
      <button onclick="showSection('portfolio')">Portfolio</button>
      <button onclick="showSection('leaderboard')">Leaderboard</button>
      <button onclick="showSection('insights')">Insights</button>
      <button onclick="showSection('gallery')">Gallery</button>
    </nav>
  </div>

  <!-- Inline Dependencies (CDNs for Production) -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.156.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/interactjs@1.10.27/dist/interact.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@google/generative-ai@0.12.0/dist/index.min.js"></script>
  <!-- OpenBB Mock Data Simulation -->
  <script>
    // Mock OpenBB price feed
    const openBBData = {
      artists: [
        { ticker: '$DAVI', name: 'Davido', price: 100, volatility: 0.05 },
        { ticker: '$TEM', name: 'Tems', price: 80, volatility: 0.07 },
        { ticker: '$WIZK', name: 'Wizkid', price: 120, volatility: 0.04 },
        // Add more artists...
      ],
      getPriceUpdate: function(ticker) {
        const artist = this.artists.find(a => a.ticker === ticker);
        const change = (Math.random() - 0.5) * artist.volatility * artist.price;
        artist.price += change;
        return artist.price;
      }
    };
  </script>
  <!-- Inline JavaScript (Minified for Production) -->
  <script>
    // Gemini API Setup
    const { GoogleGenerativeAI } = window.google.generativeAI;
    const genAI = new GoogleGenerativeAI('YOUR_GEMINI_API_KEY'); // Replace with API key from Google AI Studio
    const model = genAI.getGenerativeModel({ model: 'gemini-2.5-pro' });

    // State Management
    let portfolio = JSON.parse(localStorage.getItem('portfolio')) || [];
    let section = 'market';

    // UI Rendering
    function showSection(id) {
      section = id;
      document.querySelectorAll('#app > div').forEach(div => div.style.display = 'none');
      document.querySelector(`.${id}`).style.display = 'block';
      if (id === 'market') renderMarket();
      if (id === 'portfolio') renderPortfolio();
      if (id === 'leaderboard') renderLeaderboard();
      if (id === 'insights') renderInsights();
      if (id === 'gallery') render3DGallery();
    }

    // Market
    function renderMarket() {
      const artistsDiv = document.getElementById('artists');
      artistsDiv.innerHTML = openBBData.artists.map(a => `
        <div class="artist-card glow">
          <h3>${a.name} (${a.ticker})</h3>
          <p>Price: $${a.price.toFixed(2)}</p>
          <button onclick="buyArtist('${a.ticker}')">Buy</button>
          <button onclick="sellArtist('${a.ticker}')">Sell</button>
        </div>
      `).join('');
    }

    // Portfolio
    function renderPortfolio() {
      const portfolioDiv = document.getElementById('portfolio');
      portfolioDiv.innerHTML = portfolio.map(p => `
        <div class="artist-card glow" data-ticker="${p.ticker}">
          <h3>${p.name} (${p.ticker})</h3>
          <p>Shares: ${p.shares} | Value: $${(p.shares * openBBData.getPriceUpdate(p.ticker)).toFixed(2)}</p>
        </div>
      `).join('');
      renderChart();
      interact('.artist-card').draggable({
        listeners: {
          move: event => event.target.style.transform = `translate(${event.dx}px, ${event.dy}px)`
        }
      });
    }

    // Buy/Sell
    function buyArtist(ticker) {
      const artist = openBBData.artists.find(a => a.ticker === ticker);
      portfolio.push({ ticker, name: artist.name, shares: 1 });
      localStorage.setItem('portfolio', JSON.stringify(portfolio));
      renderPortfolio();
    }
    function sellArtist(ticker) {
      portfolio = portfolio.filter(p => p.ticker !== ticker);
      localStorage.setItem('portfolio', JSON.stringify(portfolio));
      renderPortfolio();
    }

    // Chart
    function renderChart() {
      const ctx = document.getElementById('chart').getContext('2d');
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: Array(10).fill().map((_, i) => `Day ${i+1}`),
          datasets: portfolio.map(p => ({
            label: p.ticker,
            data: Array(10).fill().map(() => openBBData.getPriceUpdate(p.ticker)),
            borderColor: '#00ff88',
            fill: false
          }))
        },
        options: { responsive: true }
      });
    }

    // Leaderboard
    function renderLeaderboard() {
      const leaderboardDiv = document.getElementById('leaderboard');
      leaderboardDiv.innerHTML = '<p>Top Players: [Mock Data]</p>'; // Replace with real data
    }

    // AI Insights
    async function renderInsights() {
      document.getElementById('generateReport').onclick = async () => {
        const prompt = `Analyze portfolio: ${JSON.stringify(portfolio)} with market data: ${JSON.stringify(openBBData.artists)}`;
        const result = await model.generateContent(prompt);
        const report = await result.response.text();
        document.getElementById('report').innerHTML = `<p>${report}</p>`;
        // Generate PDF
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.text(report, 10, 10);
        doc.save('AfroGenstas_Report.pdf');
      };
    }

    // 3D Gallery
    function render3DGallery() {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('3dCanvas') });
      renderer.setSize(window.innerWidth, 400);
      const geometry = new THREE.BoxGeometry();
      const material = new THREE.MeshBasicMaterial({ color: 0x00ff88 });
      const cube = new THREE.Mesh(geometry, material);
      scene.add(cube);
      camera.position.z = 5;
      function animate() {
        requestAnimationFrame(animate);
        cube.rotation.x += 0.01;
        cube.rotation.y += 0.01;
        renderer.render(scene, camera);
      }
      animate();
    }

    // Real-time Updates
    setInterval(() => {
      if (section === 'market') renderMarket();
      if (section === 'portfolio') renderPortfolio();
    }, 5000);

    // Social Sharing
    document.addEventListener('click', e => {
      if (e.target.classList.contains('share')) {
        navigator.share({
          title: 'My AfroGenstas Portfolio',
          text: 'Check out my portfolio on AfroGenstas!',
          url: window.location.href
        });
      }
    });

    // Initialize
    showSection('market');
  </script>
</body>
</html>
